---
ms.date: 06/12/2017
keywords: wmf,powershell,設定
ms.openlocfilehash: 9af931a1a2b545ba36826246c4155f42052a16bf
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/23/2019
ms.locfileid: "62085691"
---
# <a name="mof-documents-are-encrypted-by-default"></a><span data-ttu-id="e3e25-102">MOF 文件預設為加密</span><span class="sxs-lookup"><span data-stu-id="e3e25-102">MOF Documents Are Encrypted By Default</span></span>

<span data-ttu-id="e3e25-103">設定文件包含機密資訊。</span><span class="sxs-lookup"><span data-stu-id="e3e25-103">Configuration documents contain sensitive information.</span></span> <span data-ttu-id="e3e25-104">在舊版的 DSC 中，您必須先發佈和管理憑證，才能保護設定中的認證。</span><span class="sxs-lookup"><span data-stu-id="e3e25-104">In previous versions of DSC you were required to distribute and manage certificates in order to secure credentials within a configuration.</span></span> <span data-ttu-id="e3e25-105">對許多人來說，即進行了所有所需的工作，這依然是重大的管理負擔，而且您還必須面對一些既沒有被保護，也無法被保護的設定資訊。</span><span class="sxs-lookup"><span data-stu-id="e3e25-105">For many, this was a significant management burden and even with all of the work it took to do this you were still left with some configuration information that was not and could not be secured.</span></span>

<span data-ttu-id="e3e25-106">這種情況將不再發生，因為**預設上所有設定 MOF 都受到保護**。</span><span class="sxs-lookup"><span data-stu-id="e3e25-106">That is no longer the case because **all configuration MOFs are secured by default**.</span></span> <span data-ttu-id="e3e25-107">沒有憑證或需要設定中繼設定。</span><span class="sxs-lookup"><span data-stu-id="e3e25-107">No certificates or meta-configuration settings are needed.</span></span> <span data-ttu-id="e3e25-108">每當在目標節點上本機設定管理員 (LCM) 將設定 MOF 儲存到磁碟時，它會進行加密。</span><span class="sxs-lookup"><span data-stu-id="e3e25-108">Any time a configuration MOF is saved to disk by the Local Configuration Manager (LCM) on a target node, it is encrypted.</span></span> <span data-ttu-id="e3e25-109">MOF 使用了 [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx) 進行加密。</span><span class="sxs-lookup"><span data-stu-id="e3e25-109">The MOFs are encrypted using [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx).</span></span> <span data-ttu-id="e3e25-110">**注意：** 由設定指令碼產生的 MOF 並未加密。</span><span class="sxs-lookup"><span data-stu-id="e3e25-110">**Note:** MOFs generated by a configuration script are not encrypted.</span></span>

<span data-ttu-id="e3e25-111">**範例︰** Push 模式中的加密 ![MOF 加密](../images/MOF_Encryption.jpg)</span><span class="sxs-lookup"><span data-stu-id="e3e25-111">**Example:** Encryption in push mode ![MOF Encryption](../images/MOF_Encryption.jpg)</span></span>

<span data-ttu-id="e3e25-112">如果您已經使用憑證方法來加密密碼，或您的密碼需要額外的保護，[現有以憑證為基礎的加密方法](https://msdn.microsoft.com/powershell/dsc/securemof)將繼續運作。</span><span class="sxs-lookup"><span data-stu-id="e3e25-112">If you are already using the certificate method for encrypting passwords or if you need additional security for your passwords, the [existing method of certificate based encryption](https://msdn.microsoft.com/powershell/dsc/securemof) will continue to work.</span></span> <span data-ttu-id="e3e25-113">結果就是使用 DPAPIs 完全加密的 MOF 文件，此文件還有使用額外的密碼進行加密。</span><span class="sxs-lookup"><span data-stu-id="e3e25-113">The result will be a MOF document that is fully encrypted using the DPAPIs and additionally have passwords encrypted within it.</span></span>

<span data-ttu-id="e3e25-114">此加密僅適用於設定 MOF 文件 (pending.MOF、current.MOF、previous.MOF 和部分 MOF)。</span><span class="sxs-lookup"><span data-stu-id="e3e25-114">This encryption only applies to configuration MOF documents (pending.mof, current.mof, previous.mof and partial MOFs).</span></span> <span data-ttu-id="e3e25-115">因為它們比較不可能包含密碼，所以中繼設定 MOF 仍然以純文字的格式儲存。</span><span class="sxs-lookup"><span data-stu-id="e3e25-115">Meta-configuration MOFs are still saved in plain text since they less likely contain secrets.</span></span>
